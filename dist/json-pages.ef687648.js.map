{"version":3,"sources":["json-pages/index.js"],"names":["host","ws","WebSocket","onopen","document","querySelector","innerHTML","onmessage","message","data","JSON","parse","op","rtt","Date","getTime","Number","args","console","log","pushRttData","endTs","totalTs","timestampE6","pushMainDataTime","timer","window","sendMsg","clearInterval","setInterval","send","stringify","addEventListener"],"mappings":";AAAA,IAAIA,EAAgE,sCAChEC,EAAK,IAAIC,UAAaF,GAAAA,OAAAA,EAA1B,UAEAC,EAAGE,OAAS,WACVC,SAASC,cAAc,eAAeC,UAAY,8CAMpDL,EAAGM,UAAY,SAAUC,GACjBC,IAAAA,EAAOC,KAAKC,MAAMH,EAAQC,MAE5BA,GAAY,SAAZA,EAAKG,GAAe,CAChBC,IAAAA,GAAM,IAAIC,MAAOC,UAAYC,OAAOP,EAAKQ,KAAK,IAGpD,OAFAC,QAAQC,IAAgBN,eAAAA,OAAAA,EAAxB,YACAO,YAAYP,GAIRQ,IACAC,GADQ,IAAIR,MAAOC,UACDN,EAAKc,YAC7BL,QAAQC,IAAI,eAAgBG,EAAS,MAErCE,iBAAiBF,IAGnB,IAAIG,EAAQ,EACZC,OAAOC,QAAU,WACfC,cAAcH,GAEdA,EAAQI,YAAY,WAClB5B,EAAG6B,KAAKpB,KAAKqB,UAAU,CAAEnB,GAAI,OAAQK,KAAK,EAAC,IAAIH,MAAOC,cACtDd,EAAG6B,KAAKpB,KAAKqB,UAAU,CAAEnB,GAAI,QAASK,KAAK,EAAC,IAAIH,MAAOC,eACtD,MAGLW,OAAOM,iBAAiB,OAAQ","file":"json-pages.ef687648.js","sourceRoot":"../web","sourcesContent":["var host = process.env.NODE_ENV === 'dev' ? 'ws://localhost:3000' : 'wss://ws-js-pb-server.herokuapp.com';\nvar ws = new WebSocket(`${host}/json`);\n\nws.onopen = () => {\n  document.querySelector('.status-txt').innerHTML = '<span style=\"color:green\">Connected</span>';\n};\n\n/**\n * Use arrayBuffer\n */\nws.onmessage = function (message) {\n  const data = JSON.parse(message.data);\n\n  if (data.op === 'pong') {\n    const rtt = new Date().getTime() - Number(data.args[0]);\n    console.log(`Pong --> ${rtt}ms`);\n    pushRttData(rtt);\n    return;\n  };\n\n  const endTs = new Date().getTime();\n  const totalTs = endTs - data.timestampE6;\n  console.log('full span = ', totalTs, 'ms');\n\n  pushMainDataTime(totalTs);\n};\n\nlet timer = 0;\nwindow.sendMsg = function sendMsg() {\n  clearInterval(timer);\n\n  timer = setInterval(() => {\n    ws.send(JSON.stringify({ op: 'ping', args:[new Date().getTime()] }));\n    ws.send(JSON.stringify({ op: 'topic', args:[new Date().getTime()] }));\n  }, 2000);\n}\n\nwindow.addEventListener('load', () => {\n\n});\n"]}