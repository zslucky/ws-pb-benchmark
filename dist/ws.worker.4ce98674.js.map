{"version":3,"sources":["json-webworker-pages/ws.worker.js"],"names":["ws","WebSocket","waitQueue","wsOpened","sendWaitingQueue","send","shift","length","onopen","postMessage","onmessage","message","data","JSON","parse","push"],"mappings":";AAAA,IAAIA,EAAK,IAAIC,UAAU,4CAEjBC,EAAY,GACdC,GAAW,EAETC,EAAmB,WACpB,GACDJ,EAAGK,KAAKH,EAAUI,eACXJ,EAAUK,OAAS,IAG9BP,EAAGQ,OAAS,WACVL,GAAW,EACXM,YAAY,WAOdT,EAAGU,UAAY,SAAUC,GACjBC,IAAAA,EAAOC,KAAKC,MAAMH,EAAQC,MAChCH,YAAYG,IAGdF,UAAY,SAAc,GAAXE,IAAAA,EAAAA,EAAAA,KACRT,EAILH,EAAGK,KAAKO,GAHNV,EAAUa,KAAKH","file":"ws.worker.4ce98674.js","sourceRoot":"../web","sourcesContent":["var ws = new WebSocket('wss://ws-js-pb-server.herokuapp.com/json');\n\nconst waitQueue = [];\nlet wsOpened = false;\n\nconst sendWaitingQueue = () => {\n  do {\n    ws.send(waitQueue.shift());\n  } while (waitQueue.length < 1);\n};\n\nws.onopen = () => {\n  wsOpened = true;\n  postMessage('opened');\n  // sendWaitingQueue();\n};\n\n/**\n * Use arrayBuffer\n */\nws.onmessage = function (message) {\n  const data = JSON.parse(message.data);\n  postMessage(data);\n};\n\nonmessage = ({ data }) => {\n  if (!wsOpened) {\n    waitQueue.push(data);\n    return;\n  }\n  ws.send(data);\n};\n"]}