{"version":3,"sources":["json-pages/index.js"],"names":["host","ws","WebSocket","onopen","document","querySelector","innerHTML","onmessage","message","data","JSON","parse","op","endTs","totalTs","Date","getTime","timestampE6","pushMainDataTime","rtt","Number","args","pushRttData","timer","window","sendMsg","clearInterval","setInterval","send","stringify","addEventListener"],"mappings":";AAAA,IAAIA,EAAgE,sCAChEC,EAAK,IAAIC,UAAaF,GAAAA,OAAAA,EAA1B,UAEAC,EAAGE,OAAS,WACVC,SAASC,cAAc,eAAeC,UAAY,8CAMpDL,EAAGM,UAAY,SAAUC,GACjBC,IAAAA,EAAOC,KAAKC,MAAMH,EAAQC,MAE5BA,GAAY,SAAZA,EAAKG,GAALH,CAMEI,IACAC,GADQ,IAAIC,MAAOC,UACDP,EAAKQ,YAE7BC,iBAAiBJ,OATbL,CACIU,IAAAA,GAAM,IAAIJ,MAAOC,UAAYI,OAAOX,EAAKY,KAAK,IACpDC,YAAYH,KAUhB,IAAII,EAAQ,EACZC,OAAOC,QAAU,WACfC,cAAcH,GAEdA,EAAQI,YAAY,WAClB1B,EAAG2B,KAAKlB,KAAKmB,UAAU,CAAEjB,GAAI,OAAQS,KAAK,EAAC,IAAIN,MAAOC,cACtDf,EAAG2B,KAAKlB,KAAKmB,UAAU,CAAEjB,GAAI,QAASS,KAAK,EAAC,IAAIN,MAAOC,eACtD,MAGLQ,OAAOM,iBAAiB,OAAQ","file":"json-pages.85fa101c.js","sourceRoot":"../web","sourcesContent":["var host = process.env.NODE_ENV === 'dev' ? 'ws://localhost:3000' : 'wss://ws-js-pb-server.herokuapp.com';\nvar ws = new WebSocket(`${host}/json`);\n\nws.onopen = () => {\n  document.querySelector('.status-txt').innerHTML = '<span style=\"color:green\">Connected</span>';\n};\n\n/**\n * Use arrayBuffer\n */\nws.onmessage = function (message) {\n  const data = JSON.parse(message.data);\n\n  if (data.op === 'pong') {\n    const rtt = new Date().getTime() - Number(data.args[0]);\n    pushRttData(rtt);\n    return;\n  };\n\n  const endTs = new Date().getTime();\n  const totalTs = endTs - data.timestampE6;\n\n  pushMainDataTime(totalTs);\n};\n\nlet timer = 0;\nwindow.sendMsg = function sendMsg() {\n  clearInterval(timer);\n\n  timer = setInterval(() => {\n    ws.send(JSON.stringify({ op: 'ping', args:[new Date().getTime()] }));\n    ws.send(JSON.stringify({ op: 'topic', args:[new Date().getTime()] }));\n  }, 2000);\n}\n\nwindow.addEventListener('load', () => {\n\n});\n"]}