{"version":3,"sources":["json-webworker-pages/ws.worker.js"],"names":["ws","WebSocket","waitQueue","wsOpened","sendWaitingQueue","send","shift","length","onopen","postMessage","onmessage","message","data","JSON","parse","push"],"mappings":"AAAA,IAAIA,EAAE,GAAG,IAAIC,SAAJ,CAAc,0CAAd,CAAT;AAEA,IAAMC,SAAS,GAAG,EAAlB;AACA,IAAIC,QAAQ,GAAG,KAAf;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,KAAG;AACDJ,IAAAA,EAAE,CAACK,IAAH,CAAQH,SAAS,CAACI,KAAV,EAAR;AACD,GAFD,QAESJ,SAAS,CAACK,MAAV,GAAmB,CAF5B;AAGD,CAJD;;AAMAP,EAAE,CAACQ,MAAH,GAAY,YAAM;AAChBL,EAAAA,QAAQ,GAAG,IAAX;AACAM,EAAAA,WAAW,CAAC,QAAD,CAAX,CAFgB,CAGhB;AACD,CAJD;AAMA;;;;;AAGAT,EAAE,CAACU,SAAH,GAAe,UAAUC,OAAV,EAAmB;AAChC,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,OAAO,CAACC,IAAnB,CAAb;AACAH,EAAAA,WAAW,CAACG,IAAD,CAAX;AACD,CAHD;;AAKAF,SAAS,GAAG,yBAAc;AAAA,MAAXE,IAAW,QAAXA,IAAW;;AACxB,MAAI,CAACT,QAAL,EAAe;AACbD,IAAAA,SAAS,CAACa,IAAV,CAAeH,IAAf;AACA;AACD;;AACDZ,EAAAA,EAAE,CAACK,IAAH,CAAQO,IAAR;AACD,CAND","file":"ws.worker.39a1f5e9.js","sourceRoot":"../web","sourcesContent":["var ws = new WebSocket('wss://ws-js-pb-server.herokuapp.com/json');\n\nconst waitQueue = [];\nlet wsOpened = false;\n\nconst sendWaitingQueue = () => {\n  do {\n    ws.send(waitQueue.shift());\n  } while (waitQueue.length < 1);\n};\n\nws.onopen = () => {\n  wsOpened = true;\n  postMessage('opened');\n  // sendWaitingQueue();\n};\n\n/**\n * Use arrayBuffer\n */\nws.onmessage = function (message) {\n  const data = JSON.parse(message.data);\n  postMessage(data);\n};\n\nonmessage = ({ data }) => {\n  if (!wsOpened) {\n    waitQueue.push(data);\n    return;\n  }\n  ws.send(data);\n};\n"]}