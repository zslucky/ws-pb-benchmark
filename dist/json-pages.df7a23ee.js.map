{"version":3,"sources":["json-pages/index.js"],"names":["host","ws","WebSocket","onopen","document","querySelector","innerHTML","onmessage","message","data","JSON","parse","op","rtt","Date","getTime","Number","args","pushRttData","endTs","totalTs","timestampE6","pushMainDataTime","timer","window","sendMsg","clearInterval","setInterval","send","stringify","addEventListener"],"mappings":"AAAA,IAAIA,IAAI,GAAG,UAAyB,KAAzB,GAAiC,qBAAjC,GAAyD,qCAApE;AACA,IAAIC,EAAE,GAAG,IAAIC,SAAJ,WAAiBF,IAAjB,WAAT;;AAEAC,EAAE,CAACE,MAAH,GAAY,YAAM;AAChBC,EAAAA,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,SAAtC,GAAkD,4CAAlD;AACD,CAFD;AAIA;;;;;AAGAL,EAAE,CAACM,SAAH,GAAe,UAAUC,OAAV,EAAmB;AAChC,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,OAAO,CAACC,IAAnB,CAAb;;AAEA,MAAIA,IAAI,CAACG,EAAL,KAAY,MAAhB,EAAwB;AACtB,QAAMC,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuBC,MAAM,CAACP,IAAI,CAACQ,IAAL,CAAU,CAAV,CAAD,CAAzC;AACAC,IAAAA,WAAW,CAACL,GAAD,CAAX;AACA;AACD;;AAAA;AAED,MAAMM,KAAK,GAAG,IAAIL,IAAJ,GAAWC,OAAX,EAAd;AACA,MAAMK,OAAO,GAAGD,KAAK,GAAGV,IAAI,CAACY,WAA7B;AAEAC,EAAAA,gBAAgB,CAACF,OAAD,CAAhB;AACD,CAbD;;AAeA,IAAIG,KAAK,GAAG,CAAZ;;AACAC,MAAM,CAACC,OAAP,GAAiB,SAASA,OAAT,GAAmB;AAClCC,EAAAA,aAAa,CAACH,KAAD,CAAb;AAEAA,EAAAA,KAAK,GAAGI,WAAW,CAAC,YAAM;AACxB1B,IAAAA,EAAE,CAAC2B,IAAH,CAAQlB,IAAI,CAACmB,SAAL,CAAe;AAAEjB,MAAAA,EAAE,EAAE,MAAN;AAAcK,MAAAA,IAAI,EAAC,CAAC,IAAIH,IAAJ,GAAWC,OAAX,EAAD;AAAnB,KAAf,CAAR;AACAd,IAAAA,EAAE,CAAC2B,IAAH,CAAQlB,IAAI,CAACmB,SAAL,CAAe;AAAEjB,MAAAA,EAAE,EAAE,OAAN;AAAeK,MAAAA,IAAI,EAAC,CAAC,IAAIH,IAAJ,GAAWC,OAAX,EAAD;AAApB,KAAf,CAAR;AACD,GAHkB,EAGhB,IAHgB,CAAnB;AAID,CAPD;;AASAS,MAAM,CAACM,gBAAP,CAAwB,MAAxB,EAAgC,YAAM,CAErC,CAFD","file":"json-pages.df7a23ee.js","sourceRoot":"../web","sourcesContent":["var host = process.env.NODE_ENV === 'dev' ? 'ws://localhost:3000' : 'wss://ws-js-pb-server.herokuapp.com';\nvar ws = new WebSocket(`${host}/json`);\n\nws.onopen = () => {\n  document.querySelector('.status-txt').innerHTML = '<span style=\"color:green\">Connected</span>';\n};\n\n/**\n * Use arrayBuffer\n */\nws.onmessage = function (message) {\n  const data = JSON.parse(message.data);\n\n  if (data.op === 'pong') {\n    const rtt = new Date().getTime() - Number(data.args[0]);\n    pushRttData(rtt);\n    return;\n  };\n\n  const endTs = new Date().getTime();\n  const totalTs = endTs - data.timestampE6;\n\n  pushMainDataTime(totalTs);\n};\n\nlet timer = 0;\nwindow.sendMsg = function sendMsg() {\n  clearInterval(timer);\n\n  timer = setInterval(() => {\n    ws.send(JSON.stringify({ op: 'ping', args:[new Date().getTime()] }));\n    ws.send(JSON.stringify({ op: 'topic', args:[new Date().getTime()] }));\n  }, 2000);\n}\n\nwindow.addEventListener('load', () => {\n\n});\n"]}